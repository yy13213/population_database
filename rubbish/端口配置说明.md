# ğŸ”Œ ç«¯å£é…ç½®è¯´æ˜

## å½“å‰é…ç½®

**è¿è¡Œç«¯å£**ï¼š`6667`

---

## ğŸ“ ä¿®æ”¹è®°å½•

### ä¿®æ”¹æ—¥æœŸ
2025-11-11

### ä¿®æ”¹å†…å®¹
å°†Flaskåº”ç”¨çš„é»˜è®¤ç«¯å£ä» `5000` æ›´æ”¹ä¸º `6667`

### ä¿®æ”¹çš„æ–‡ä»¶

1. âœ… **GIS_Flask/app.py**
   - å¯åŠ¨é…ç½®ï¼š`port=6667`
   - æ¬¢è¿ä¿¡æ¯ï¼š`http://127.0.0.1:6667`

2. âœ… **GIS_Flask/README.md**
   - æ‰€æœ‰URLï¼š`http://localhost:6667`

3. âœ… **GIS_Flask/å¿«é€Ÿå¼€å§‹.md**
   - è®¿é—®åœ°å€ï¼š`http://localhost:6667`

4. âœ… **GIS_Flask/test_api.py**
   - APIæµ‹è¯•åœ°å€ï¼š`http://localhost:6667`

5. âœ… **GIS_Flask/ç³»ç»Ÿå¯¹æ¯”.md**
   - Gunicorné…ç½®ï¼š`0.0.0.0:6667`
   - Nginxä»£ç†ï¼š`http://127.0.0.1:6667`
   - Dockeré…ç½®ï¼š`0.0.0.0:6667`

---

## ğŸš€ å¯åŠ¨åº”ç”¨

### å¼€å‘æ¨¡å¼

```bash
cd GIS_Flask
python app.py
```

**è®¿é—®åœ°å€**ï¼šhttp://localhost:6667

### ç”Ÿäº§æ¨¡å¼ (Gunicorn)

```bash
gunicorn -w 4 -b 0.0.0.0:6667 app:app
```

---

## ğŸ“¡ APIç«¯ç‚¹

æ‰€æœ‰APIç«¯ç‚¹å‡ä½¿ç”¨ `6667` ç«¯å£ï¼š

| ç«¯ç‚¹ | å®Œæ•´URL |
|------|--------|
| ä¸»é¡µ | http://localhost:6667/ |
| å¥åº·æ£€æŸ¥ | http://localhost:6667/api/health |
| ç¼“å­˜ä¿¡æ¯ | http://localhost:6667/api/cache/info |
| äººå£æ•°æ® | http://localhost:6667/api/data/population |
| äººå£å¯†åº¦ | http://localhost:6667/api/data/density |
| å©šå§»æ•°æ® | http://localhost:6667/api/data/marriage |

---

## ğŸ”§ å¦‚ä½•ä¿®æ”¹ç«¯å£

å¦‚éœ€ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼ˆä¾‹å¦‚ `8888`ï¼‰ï¼Œä¿®æ”¹ä»¥ä¸‹ä½ç½®ï¼š

### 1. ä¸»åº”ç”¨æ–‡ä»¶

**æ–‡ä»¶**ï¼š`GIS_Flask/app.py`

```python
# æ‰¾åˆ°è¿™ä¸€è¡Œ
app.run(
    host='0.0.0.0',
    port=6667,  # ä¿®æ”¹ä¸ºä½ æƒ³è¦çš„ç«¯å£
    debug=True,
    threaded=True
)
```

### 2. æ¬¢è¿ä¿¡æ¯

**æ–‡ä»¶**ï¼š`GIS_Flask/app.py`

```python
print(f"   - æœåŠ¡åœ°å€: http://127.0.0.1:6667")  # ä¿®æ”¹ç«¯å£å·
print(f"   - APIæ–‡æ¡£: http://127.0.0.1:6667/api/health")  # ä¿®æ”¹ç«¯å£å·
```

### 3. æ–‡æ¡£æ–‡ä»¶

æ‰¹é‡æ›¿æ¢ä»¥ä¸‹æ–‡ä»¶ä¸­çš„ `6667`ï¼š
- `README.md`
- `å¿«é€Ÿå¼€å§‹.md`
- `test_api.py`
- `ç³»ç»Ÿå¯¹æ¯”.md`

---

## ğŸ›¡ï¸ é˜²ç«å¢™é…ç½®

### Windowsé˜²ç«å¢™

```powershell
# å…è®¸å…¥ç«™è¿æ¥
netsh advfirewall firewall add rule name="Flask GIS Port 6667" dir=in action=allow protocol=TCP localport=6667
```

### Linuxé˜²ç«å¢™ (ufw)

```bash
sudo ufw allow 6667/tcp
```

### Linuxé˜²ç«å¢™ (firewalld)

```bash
sudo firewall-cmd --permanent --add-port=6667/tcp
sudo firewall-cmd --reload
```

---

## ğŸŒ Nginxåå‘ä»£ç†é…ç½®

å¦‚æœä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:6667;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

---

## ğŸ³ Dockeré…ç½®

### Dockerfile

```dockerfile
FROM python:3.9
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 6667
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:6667", "app:app"]
```

### docker-compose.yml

```yaml
version: '3.8'
services:
  gis-flask:
    build: .
    ports:
      - "6667:6667"
    environment:
      - FLASK_ENV=production
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç«¯å£å ç”¨æ£€æŸ¥

**Windows**ï¼š
```powershell
netstat -ano | findstr :6667
```

**Linux/Mac**ï¼š
```bash
lsof -i :6667
# æˆ–
netstat -tuln | grep 6667
```

### å¸¸è§ç«¯å£å†²çª

å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸‹å¤‡ç”¨ç«¯å£ï¼š
- `8080` - å¸¸ç”¨Webç«¯å£
- `8888` - Jupyterç­‰å¸¸ç”¨
- `9000` - é€šç”¨åº”ç”¨ç«¯å£
- `3000` - Node.jsé»˜è®¤ç«¯å£
- `8000` - Djangoé»˜è®¤ç«¯å£

### å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒ**ï¼šä¸è¦ç›´æ¥æš´éœ²åº”ç”¨ç«¯å£ï¼Œä½¿ç”¨Nginxåå‘ä»£ç†
2. **é˜²ç«å¢™**ï¼šé™åˆ¶ç«¯å£åªå…è®¸å¿…è¦çš„IPè®¿é—®
3. **HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨SSL/TLSåŠ å¯†
4. **ç›‘æ§**ï¼šè®¾ç½®ç«¯å£ç›‘æ§å’Œå¼‚å¸¸å‘Šè­¦

---

## ğŸ“Š ç«¯å£ä½¿ç”¨ç»Ÿè®¡

### å¸¸è§Webåº”ç”¨ç«¯å£

| åº”ç”¨ | é»˜è®¤ç«¯å£ | è¯´æ˜ |
|------|---------|------|
| HTTP | 80 | WebæœåŠ¡æ ‡å‡†ç«¯å£ |
| HTTPS | 443 | åŠ å¯†WebæœåŠ¡ |
| Flask (å¼€å‘) | 5000 | Flaské»˜è®¤ç«¯å£ |
| Django | 8000 | Djangoé»˜è®¤ç«¯å£ |
| Node.js | 3000 | Expressé»˜è®¤ç«¯å£ |
| Streamlit | 8501 | Streamlité»˜è®¤ç«¯å£ |
| **æœ¬åº”ç”¨** | **6667** | **è‡ªå®šä¹‰ç«¯å£** |

---

## âœ… é…ç½®éªŒè¯

### å¯åŠ¨åº”ç”¨åéªŒè¯

1. **æ£€æŸ¥ç«¯å£ç›‘å¬**ï¼š
   ```bash
   # Windows
   netstat -ano | findstr :6667
   
   # Linux/Mac
   netstat -tuln | grep 6667
   ```

2. **æµ‹è¯•å¥åº·æ£€æŸ¥**ï¼š
   ```bash
   curl http://localhost:6667/api/health
   ```

3. **æµè§ˆå™¨è®¿é—®**ï¼š
   æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:6667

4. **APIæµ‹è¯•è„šæœ¬**ï¼š
   ```bash
   cd GIS_Flask
   python test_api.py
   ```

---

## ğŸ‰ å®Œæˆï¼

ç«¯å£é…ç½®å·²æ›´æ–°ä¸º **6667**ï¼Œæ‰€æœ‰ç›¸å…³æ–‡æ¡£å·²åŒæ­¥æ›´æ–°ã€‚

**ç«‹å³å¯åŠ¨åº”ç”¨**ï¼š

```bash
cd GIS_Flask
python app.py
```

**è®¿é—®åœ°å€**ï¼šhttp://localhost:6667 ğŸš€

